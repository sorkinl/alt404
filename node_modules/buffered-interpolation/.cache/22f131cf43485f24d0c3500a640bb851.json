{"dependencies":[{"name":"C:\\mozilla\\buffered-interpolation\\package.json","includedInParent":true,"mtime":1529714238638}],"generated":{"js":"var i=function(){function i(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function e(i,e){if(!(i instanceof e))throw new TypeError(\"Cannot call a class as a function\")}var t=0,n=1,o=2,r=0,s=1,a=function(){function a(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;e(this,a),this.state=t,this.buffer=[],this.bufferTime=1e3*n,this.time=0,this.mode=i,this.originFrame={position:new THREE.Vector3,velocity:new THREE.Vector3,quaternion:new THREE.Quaternion,scale:new THREE.Vector3(1,1,1)},this.position=new THREE.Vector3,this.quaternion=new THREE.Quaternion,this.scale=new THREE.Vector3(1,1,1)}return i(a,[{key:\"hermite\",value:function(i,e,t,n,o,r){var s=e*e,a=e*e*e,u=2*a-3*s+1,l=-2*a+3*s,h=a-2*s+e,f=a-s;i.copy(t.multiplyScalar(u)),i.add(n.multiplyScalar(l)),i.add(o.multiplyScalar(h)),i.add(r.multiplyScalar(f))}},{key:\"lerp\",value:function(i,e,t,n){i.lerpVectors(e,t,n)}},{key:\"slerp\",value:function(i,e,t,n){THREE.Quaternion.slerp(e,t,i,n)}},{key:\"appendBuffer\",value:function(i,e,t,n){var o=this.buffer.length>0?this.buffer[this.buffer.length-1]:null;if(o&&o.time===this.time)i&&o.position.copy(i),e&&o.velocity.copy(e),t&&o.quaternion.copy(t),n&&o.scale.copy(n);else{var r=o||this.originFrame;this.buffer.push({position:i?i.clone():r.position.clone(),velocity:e?e.clone():r.velocity.clone(),quaternion:t?t.clone():r.quaternion.clone(),scale:n?n.clone():r.scale.clone(),time:this.time})}}},{key:\"setTarget\",value:function(i,e,t,n){this.appendBuffer(i,e,t,n)}},{key:\"setPosition\",value:function(i,e){this.appendBuffer(i,e,null,null)}},{key:\"setQuaternion\",value:function(i){this.appendBuffer(null,null,i,null)}},{key:\"setScale\",value:function(i){this.appendBuffer(null,null,null,i)}},{key:\"update\",value:function(i){if(this.state===t&&this.buffer.length>0&&(this.originFrame=this.buffer.shift(),this.position.copy(this.originFrame.position),this.quaternion.copy(this.originFrame.quaternion),this.scale.copy(this.originFrame.scale),this.state=n),this.state===n&&this.buffer.length>0&&this.time>this.bufferTime&&(this.state=o),this.state===o){for(var e=this.time-this.bufferTime;this.buffer.length>0&&e>this.buffer[0].time;)this.buffer.length>1?this.originFrame=this.buffer.shift():(this.originFrame.position.copy(this.buffer[0].position),this.originFrame.velocity.copy(this.buffer[0].velocity),this.originFrame.quaternion.copy(this.buffer[0].quaternion),this.originFrame.scale.copy(this.buffer[0].scale),this.originFrame.time=this.buffer[0].time,this.buffer[0].time=this.time+i);if(this.buffer.length>0&&this.buffer[0].time>0){var a=this.buffer[0],u=a.time-this.originFrame.time,l=(e-this.originFrame.time)/u;this.mode===r?this.lerp(this.position,this.originFrame.position,a.position,l):this.mode===s&&this.hermite(this.position,l,this.originFrame.position,a.position,this.originFrame.velocity.multiplyScalar(u),a.velocity.multiplyScalar(u)),this.slerp(this.quaternion,this.originFrame.quaternion,a.quaternion,l),this.lerp(this.scale,this.originFrame.scale,a.scale,l)}}this.state!==t&&(this.time+=i)}},{key:\"getPosition\",value:function(){return this.position}},{key:\"getQuaternion\",value:function(){return this.quaternion}},{key:\"getScale\",value:function(){return this.scale}}]),a}();\"undefined\"!=typeof module&&void 0!==module.exports&&(module.exports=a);","map":null},"hash":"54c1a598d3074de8eab9ad30456cfa67","cacheData":{"env":{}}}